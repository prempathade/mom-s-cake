<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Cart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"/>
  <link rel="stylesheet" href="style.css">
  <style>
    .payment-logo {
      height: 30px;
      margin-right: 10px;
    }
    .list-group-item {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .qr-section {
      display: none; /* hidden by default */
      margin-top: 20px;
      text-align: center;
    }
    .qr-section img {
      width: 200px;
      height: auto;
    }
     .nav-link{
  color: black;
} 

.cake-card {
      transition: 0.3s;
    }
    .cake-card:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    .like-btn {
      color: gray;
      cursor: pointer;
      transition: 0.3s;
    }
    .like-btn.liked {
      color: red;
    }
    .cart-count {
      background: red;
      color: white;
      font-size: 12px;
      border-radius: 50%;
      padding: 2px 6px;
      position: absolute;
      top: 5px;
      right: 5px;
    }
    .nav-link {
      color: black;
    }
    /* Footer Styling */
    footer {
      background: #222;
      color: #fff;
      padding: 40px 20px 20px;
    }
    footer a {
      color: #ffb6c1;
      text-decoration: none;
    }
    footer a:hover {
      text-decoration: underline;
    }
    .social-icons a {
      font-size: 20px;
      margin: 0 10px;
      color: #ffb6c1;
    }
    .social-icons a:hover {
      color: #fff;
    }

  </style>
</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
  <div class="container">
    <a class="navbar-brand" href="#"><img src="freepik_assistant_1758007196049.png" alt="Logo" style="height: 80px; width: 80px;"/></a>
    <h2 class="h2">MOM'S CAKE</h2>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav position-relative">
        <li class="nav-item"><a class="nav-link text-danger" href="index.html"><i class="fas fa-house"></i> Home</a></li>
        <li class="nav-item"><a class="nav-link" href="shop.html"><i class="fas fa-truck-fast"></i> Shop</a></li> 
        <li class="nav-item"><a class="nav-link" href="login.html"><i class="fas fa-user-tie"></i> Login</a></li>
        <li class="nav-item position-relative">
          <a class="nav-link" href="cart.html"><i class="fas fa-cart-shopping"></i> Cart</a>
          <span id="cart-count" class="cart-count">0</span>
        </li>
      </ul>
    </div>
  </div>
</nav>



<div class="container my-5">
  <h2>Your Cart</h2>
  <table class="table table-bordered" id="cart-table">
    <thead>
      <tr>
        <th>Item</th>
        <th>Price</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <h4>Total: ₹<span id="total-price">0</span></h4>

  <!-- Customer Details -->
  <h3 class="mt-4">Customer Details</h3>
  <div class="mb-3">
    <label for="customer-name" class="form-label">Your Name</label>
    <input type="text" id="customer-name" class="form-control" required>
  </div>

  <div class="mb-3">
    <label for="customer-address" class="form-label">Delivery Address</label>
    <textarea id="customer-address" class="form-control" rows="2" required></textarea>
  </div>

  <!-- Payment Method -->
  <h3 class="mt-4">Choose Payment Method</h3>
  <div class="list-group">
    <label class="list-group-item">
      <input type="radio" name="payment" value="GPay">
      <img src="icons8-google-pay-48.png" class="payment-logo" alt="Google Pay">
      Google Pay
    </label>
    <label class="list-group-item">
      <input type="radio" name="payment" value="PhonePe">
      <img src="icons8-phone-pe-48.png" class="payment-logo" alt="PhonePe">
      PhonePe
    </label>
    <label class="list-group-item">
      <input type="radio" name="payment" value="COD">
      <i class="fas fa-money-bill-wave payment-logo text-success"></i>
      Cash on Delivery
    </label>
  </div>

  <!-- QR Sections -->
  <div id="qr-gpay" class="qr-section">
    <h5>Scan to Pay with Google Pay</h5>
    <img src="gpay.jpeg" alt="GPay QR Code">
  </div>

  <div id="qr-phonepe" class="qr-section">
    <h5>Scan to Pay with PhonePe</h5>
    <img src="phone pay.jpeg" alt="PhonePe QR Code">
  </div>

  <!-- Proceed Button -->
  <button class="btn btn-success mt-3" id="checkout-btn" onclick="placeOrder()">Proceed to Pay</button>
</div>


<!-- Footer -->
<footer class="mt-5">
  <div class="container">
    <div class="row">
      <!-- Quick Links -->
      <div class="col-md-3">
        <h5>Quick Links</h5>
        <ul class="list-unstyled">
          <li><a href="index.html">Home</a></li>
          <li><a href="shop.html">Shop</a></li>
          <li><a href="login.html">Login</a></li>
          <li><a href="cart.html">Cart</a></li>
        </ul>
      </div>

      <!-- Contact -->
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>Email: prempathade19@.com</p>
        <p>Phone: +91 8625962810</p>
        <p>Phone: +91 9881761213</p>
        <p>Address:Near Fortune Hotel Vasmant Road,Parbhani.</p>
        <p>Delivery Available Only In Parbhani.</p>
      </div>

      <!-- Social Media -->
      <div class="col-md-3">
        <h5>Follow Us</h5>
        <div class="social-icons">
          <a href="#"><i class="fab fa-facebook"></i></a>
          <a href="https://www.instagram.com/sushma_chapke29?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw=="><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
        </div>
      </div>

      <!-- Feedback Form -->
      <div class="col-md-3">
        <h5>Feedback</h5>
        <form>
          <div class="mb-2">
            <input type="text" class="form-control" placeholder="Your Name" required>
          </div>
          <div class="mb-2">
            <input type="email" class="form-control" placeholder="Your Email" required>
          </div>
          <div class="mb-2">
            <textarea class="form-control" rows="2" placeholder="Your Feedback"></textarea>
          </div>
          <button type="submit" class="btn btn-sm btn-danger">Submit</button>
        </form>
      </div>
    </div>

    <hr class="mt-4">
    <p class="text-center">&copy; 2025 Mom's Cake. All Rights Reserved.</p>
  </div>
</footer>





<script>
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  let total = 0;
  const tbody = document.querySelector("#cart-table tbody");

  function updateCart() {
    tbody.innerHTML = "";
    total = 0;
    cart.forEach((item, index) => {
      total += item.price;
      tbody.innerHTML += `
        <tr>
          <td>${item.name}</td>
          <td>₹${item.price}</td>
          <td><button class="btn btn-sm btn-danger" onclick="removeItem(${index})">Remove</button></td>
        </tr>`;
    });
    document.getElementById("total-price").innerText = total;
    localStorage.setItem("cart", JSON.stringify(cart));
  }

  function removeItem(index) {
    cart.splice(index, 1);
    updateCart();
  }

  // Handle showing correct QR
  document.querySelectorAll("input[name='payment']").forEach(input => {
    input.addEventListener("change", function() {
      document.querySelectorAll(".qr-section").forEach(qr => qr.style.display = "none");
      if (this.value === "GPay") {
        document.getElementById("qr-gpay").style.display = "block";
      } else if (this.value === "PhonePe") {
        document.getElementById("qr-phonepe").style.display = "block";
      } else if (this.value === "Paytm") {
        document.getElementById("qr-paytm").style.display = "block";
      }
    });
  });

    function placeOrder() {
  // Get cart data
  let table = document.getElementById("cart-table").getElementsByTagName("tbody")[0];
  let rows = table.getElementsByTagName("tr");
  let items = [];

  for (let i = 0; i < rows.length; i++) {
    let item = rows[i].getElementsByTagName("td")[0].innerText;
    let price = rows[i].getElementsByTagName("td")[1].innerText;
    items.push({ item, price });
  }

  // Get total price
  let total = document.getElementById("total-price").innerText;

  // Get customer details
  let customerName = document.getElementById("customer-name").value;
  let customerAddress = document.getElementById("customer-address").value;

  // Get payment method
  let paymentMethod = document.querySelector('input[name="payment"]:checked');
  if (!paymentMethod) {
    alert("Please select a payment method");
    return;
  }
  paymentMethod = paymentMethod.value;

  // Check if name/address are filled
  if (!customerName || !customerAddress) {
    alert("Please enter your Name and Address");
    return;
  }

  // Prepare order data
  let orderData = {
    items,
    total,
    customerName,
    customerAddress,
    paymentMethod
  };

  console.log("Sending Order:", orderData);

  // Send order to backend
  fetch("http://localhost:5000/order", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(orderData)
  })
    .then(response => response.json())
    .then(data => {
      alert("Order placed successfully! ✅ You will get details on WhatsApp.");
      console.log("Response:", data);
    })
    .catch(error => {
      console.error("Error:", error);
      alert("❌ Something went wrong. Please try again.");
    });
}
  updateCart()
</script>
</body>
</html>
